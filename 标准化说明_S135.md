# 国家宏观指数综合评分标准化说明

## 一、标准化的维度
本次国家宏观指数综合评分采用**年度维度的离差标准化（Min-Max标准化）**，具体说明如下：

### 1. 标准化维度：年度维度
- **说明**：对每个年度（2021、2022、2023年）的所有国家数据分别进行标准化处理
- **原因**：不同年份的宏观经济指标（如GDP、PPI、CPI等）的数值范围和经济环境存在差异，按年度标准化可以消除跨年度的影响，使得同一年度内不同国家的指标具有可比性

### 2. 标准化指标：5项宏观经济指标
- GDP（国内生产总值）：反映国家经济规模
- PPI（生产者价格指数）：反映工业生产者出厂价格变动趋势和变动程度
- CPI（消费者价格指数）：反映居民家庭一般所购买的消费品和服务项目价格水平变动情况
- M2（货币供应量）：反映经济体中的货币总量
- Exchange_Rate（汇率）：相对于美元的汇率

## 二、计算过程（离差标准化）
离差标准化（Min-Max标准化）是一种将数据映射到[0,1]区间的标准化方法，计算公式如下：

$$X_{norm} = \frac{X - X_{min}}{X_{max} - X_{min}}$$

其中：
- $X_{norm}$：标准化后的值
- $X$：原始数据值
- $X_{min}$：该年度该指标的最小值
- $X_{max}$：该年度该指标的最大值

### 具体步骤：
1. **按年度分组**：将20个国家的宏观经济数据按年度（2021、2022、2023）分别分组
2. **计算极值**：对每个年度的每个指标（GDP、PPI、CPI、M2、汇率）计算最小值和最大值
3. **标准化计算**：对每个国家的每个指标值应用上述公式进行标准化，将其映射到[0,1]区间

## 三、美国案例说明
以美国2021-2023年的宏观经济指标为例，详细说明标准化过程：

### 1. 美国原始数据（来自country_year_feature.csv）
| 年份 | GDP（万亿美元） | PPI（%） | CPI（%） | M2（万亿美元） | 汇率（USD=1） |
|------|----------------|----------|----------|----------------|---------------|
| 2021 | 24.02          | 6.71     | 4.71     | 21.41          | 1.00          |
| 2022 | 25.35          | 2.34     | 2.03     | 22.21          | 1.00          |
| 2023 | 26.86          | 5.82     | 1.65     | 23.03          | 1.00          |

### 2. 2021年标准化过程（以GDP为例）
- **2021年GDP极值**：
  - 最小值：南非 0.29万亿美元
  - 最大值：美国 24.02万亿美元
- **美国GDP标准化计算**：
  $$X_{norm} = \frac{24.02 - 0.29}{24.02 - 0.29} = 1.0$$

### 3. 美国标准化结果（来自Normalization.csv）
| 年份 | GDP（标准化） | PPI（标准化） | CPI（标准化） | M2（标准化） | 汇率（标准化） |
|------|---------------|---------------|---------------|---------------|----------------|
| 2021 | 1.0           | 1.0           | 0.7640        | 1.0           | 0.0            |
| 2022 | 1.0           | 0.1267        | 0.0442        | 1.0           | 0.0368         |
| 2023 | 1.0           | 0.7325        | 0.0           | 1.0           | 0.0            |

### 4. 结果分析
- **GDP和M2**：美国在2021-2023年的GDP和M2均为该年度的最大值，因此标准化值均为1.0
- **PPI**：2021年美国PPI为年度最大值，标准化值为1.0；2022年PPI较低，标准化值为0.1267；2023年PPI恢复，标准化值为0.7325
- **CPI**：2021年美国CPI处于较高水平，标准化值为0.7640；2022年CPI下降，标准化值为0.0442；2023年CPI为年度最小值，标准化值为0.0
- **汇率**：美国汇率始终为1.0（USD=1），在2021和2023年为年度最小值，标准化值为0.0；2022年汇率略高，标准化值为0.0368

## 四、标准化的意义
1. **消除量纲影响**：将不同指标的数值映射到相同的[0,1]区间，使得不同指标之间可以直接比较
2. **提高模型稳定性**：在后续的权重计算和综合评分中，避免数值较大的指标（如GDP、M2）对结果产生过度影响
3. **增强可比性**：使得同一年度内不同国家的宏观经济指标具有可比性，便于进行综合评分和排名

## 五、代码实现（来自macro_index_score.py）
```python
# 离差标准化（Min-Max标准化）
normalized_data = country_year_feature.copy()
for year in years:
    year_data = normalized_data[normalized_data['Year'] == year]
    for col in numeric_cols:
        min_val = year_data[col].min()
        max_val = year_data[col].max()
        if max_val > min_val:
            normalized_data.loc[normalized_data['Year'] == year, col] = \
                (year_data[col] - min_val) / (max_val - min_val)
```

通过上述标准化过程，我们得到了每个国家每年的标准化宏观经济指标数据，为后续的权重计算和综合评分奠定了基础。